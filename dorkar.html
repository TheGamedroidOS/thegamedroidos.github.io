<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameDroid - Android OS Clone</title>
    <style>
        :root {
            --primary-color: rgba(75, 0, 130, 0.8);
            --accent-color: rgb(138, 43, 226);
            --glass-bg: rgba(15, 15, 20, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --app-size: 70px;
            --app-padding: 10px;
            --app-drawer-height: 70vh;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            height: 100vh;
            width: 100%;
            overflow: hidden;
            background: #000;
            color: white;
            position: relative;
        }

        .container {
            height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            background-size: cover;
            background-position: center;
            position: relative;
            transition: background-image 0.5s ease;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .status-bar .time {
            font-weight: bold;
        }

        .home-screen {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 20px;
            width: 100%;
            max-width: 400px;
        }

        .app {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .app:hover {
            transform: scale(1.1);
        }

        .app-icon {
            width: var(--app-size);
            height: var(--app-size);
            background: var(--glass-bg);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid var(--glass-border);
            overflow: hidden;
            position: relative;
        }

        .app-icon img {
            width: 70%;
            height: 70%;
            object-fit: contain;
        }

        .app-name {
            margin-top: 5px;
            font-size: 12px;
            text-align: center;
            color: white;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
        }

        .dock {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px;
            background: var(--glass-bg);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            margin-top: auto;
            width: 80%;
            max-width: 400px;
            border: 1px solid var(--glass-border);
        }

        .dock .app-icon {
            width: 60px;
            height: 60px;
        }

        .app-drawer-handle {
            width: 40px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 3px;
            margin: 15px auto;
            cursor: pointer;
        }

        .app-drawer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: var(--app-drawer-height);
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-top-left-radius: 25px;
            border-top-right-radius: 25px;
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            border-top: 1px solid var(--glass-border);
        }

        .app-drawer.open {
            transform: translateY(0);
        }

        .app-drawer-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding-bottom: 50px;
            justify-items: center;
        }

        .search-bar {
            margin-bottom: 20px;
            width: 100%;
            max-width: 300px;
            margin: 0 auto 20px;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
        }

        /* App Screen */
        .app-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 15, 20, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        .app-screen.open {
            transform: translateY(0);
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--glass-bg);
            border-bottom: 1px solid var(--glass-border);
        }

        .app-header .back-button {
            font-size: 24px;
            cursor: pointer;
            color: white;
            background: none;
            border: none;
        }

        .app-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* Settings */
        .settings-section {
            margin-bottom: 30px;
        }

        .settings-section h3 {
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .wallpaper-options {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .wallpaper-option {
            width: 80px;
            height: 150px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s ease;
        }

        .wallpaper-option.active {
            border-color: var(--accent-color);
        }

        .wallpaper-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .theme-options {
            display: flex;
            gap: 10px;
        }

        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s ease;
        }

        .theme-option.active {
            border-color: white;
        }

        .grid-options {
            display: flex;
            gap: 10px;
        }

        .grid-option {
            padding: 5px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .grid-option.active {
            background: var(--accent-color);
        }

        .custom-wallpaper {
            margin-top: 10px;
        }

        .custom-wallpaper input {
            display: none;
        }

        .custom-wallpaper label {
            display: inline-block;
            padding: 8px 15px;
            background: var(--accent-color);
            border-radius: 5px;
            cursor: pointer;
        }

        /* Calendar */
        .calendar {
            max-width: 350px;
            margin: 0 auto;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-days div {
            text-align: center;
            padding: 10px;
            border-radius: 5px;
        }

        .calendar-days .day-name {
            font-weight: bold;
            background: rgba(255, 255, 255, 0.1);
        }

        .calendar-days .day {
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .calendar-days .day:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .calendar-days .day.today {
            background: var(--accent-color);
        }

        .calendar-days .day.other-month {
            opacity: 0.5;
        }

        /* Clock */
        .clock {
            text-align: center;
            padding: 40px 0;
        }

        .clock .time {
            font-size: 60px;
            font-weight: 300;
        }

        .clock .date {
            font-size: 20px;
            margin-top: 10px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Play Store */
        .store-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .store-category {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
        }

        .store-category.active {
            background: var(--accent-color);
        }

        .store-apps {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .store-app {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            border-radius: 10px;
            transition: background 0.2s ease;
            cursor: pointer;
        }

        .store-app:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .store-app-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            overflow: hidden;
        }

        .store-app-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .store-app-info {
            flex: 1;
        }

        .store-app-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .store-app-description {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .store-app-actions {
            padding: 5px 15px;
            background: var(--accent-color);
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Games */
        .game-frame {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Copyright */
        .copyright {
            position: absolute;
            bottom: 10px;
            left: 10px;
            display: flex;
            align-items: center;
            font-size: 10px;
            opacity: 0.5;
            z-index: 10;
        }

        .copyright img {
            width: 15px;
            height: 15px;
            margin-right: 5px;
        }

        /* Support buttons */
        .support-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .support-button {
            padding: 10px 20px;
            background: var(--accent-color);
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .support-button:hover {
            background: rgba(138, 43, 226, 0.8);
        }

        /* App Icon Customization */
        .app-icon-custom {
            margin-top: 10px;
        }

        .app-icon-custom input {
            display: none;
        }

        .app-icon-custom label {
            display: inline-block;
            padding: 8px 15px;
            background: var(--accent-color);
            border-radius: 5px;
            cursor: pointer;
            margin-top: 5px;
        }

        /* Animations */
        @keyframes appOpen {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .app-screen.open {
            animation: appOpen 0.3s forwards;
        }
    </style>
</head>

<body>
    <div class="container" id="container">
        <div class="status-bar">
            <div class="network">
                <span>üì∂</span>
                <span>üì∂</span>
            </div>
            <div class="time" id="status-time">12:00</div>
            <div class="battery">
                <span>üîã 85%</span>
            </div>
        </div>

        <div class="home-screen">
            <div class="app-grid" id="app-grid">
                <!-- Apps will be dynamically added here -->
            </div>

            <div class="dock">
                <div class="app" data-app="games">
                    <div class="app-icon">
                        <img src="/api/placeholder/400/400" alt="Games">
                    </div>
                </div>
                <div class="app" data-app="playstore">
                    <div class="app-icon">
                        <img src="/api/placeholder/400/400" alt="Play Store">
                    </div>
                </div>
                <div class="app" data-app="settings">
                    <div class="app-icon">
                        <img src="/api/placeholder/400/400" alt="Settings">
                    </div>
                </div>
            </div>

            <div class="app-drawer-handle" id="app-drawer-handle"></div>
        </div>

        <div class="app-drawer" id="app-drawer">
            <div class="search-bar">
                <input type="text" placeholder="Search apps...">
            </div>
            <div class="app-drawer-grid" id="app-drawer-grid">
                <!-- Apps will be dynamically added here -->
            </div>
        </div>

        <!-- App Screens -->
        <div class="app-screen" id="games-screen" data-app="games">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Games</h2>
                <div></div>
            </div>
            <div class="app-content">
                <div class="store-apps">
                    <div class="store-app" data-game="cosmicdash">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Cosmic Dash">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Cosmic Dash</div>
                            <div class="store-app-description">Race through space avoiding obstacles!</div>
                        </div>
                        <div class="store-app-actions">PLAY</div>
                    </div>
                    <div class="store-app" data-game="pacman">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Pacman">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Pacman</div>
                            <div class="store-app-description">Classic arcade game - eat dots, avoid ghosts!</div>
                        </div>
                        <div class="store-app-actions">PLAY</div>
                    </div>
                    <div class="store-app" data-game="tictactoe">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Tic Tac Toe">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Tic Tac Toe</div>
                            <div class="store-app-description">Classic game of X's and O's</div>
                        </div>
                        <div class="store-app-actions">PLAY</div>
                    </div>
                    <div class="store-app" data-game="tetris">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Tetris">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Tetris</div>
                            <div class="store-app-description">Arrange falling blocks to clear lines</div>
                        </div>
                        <div class="store-app-actions">PLAY</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="app-screen" id="calendar-screen" data-app="calendar">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Calendar</h2>
                <div></div>
            </div>
            <div class="app-content">
                <div class="calendar">
                    <div class="calendar-header">
                        <button id="prev-month">‚óÄ</button>
                        <h3 id="current-month">March 2025</h3>
                        <button id="next-month">‚ñ∂</button>
                    </div>
                    <div class="calendar-days" id="calendar-days">
                        <!-- Calendar will be dynamically generated -->
                    </div>
                </div>
            </div>
        </div>

        <div class="app-screen" id="clock-screen" data-app="clock">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Clock</h2>
                <div></div>
            </div>
            <div class="app-content">
                <div class="clock">
                    <div class="time" id="clock-time">12:00:00</div>
                    <div class="date" id="clock-date">Friday, March 14, 2025</div>
                </div>
            </div>
        </div>

        <div class="app-screen" id="support-screen" data-app="support">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Support Us</h2>
                <div></div>
            </div>
            <div class="app-content">
                <h3>Support GameDroid</h3>
                <p>Thanks for using GameDroid! If you enjoy our games and platform, consider supporting us.</p>
                <div class="support-buttons">
                    <div class="support-button">Support Us</div>
                    <div class="support-button">Contribute</div>
                </div>
            </div>
        </div>

        <div class="app-screen" id="settings-screen" data-app="settings">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Settings</h2>
                <div></div>
            </div>
            <div class="app-content">
                <div class="settings-section">
                    <h3>Wallpaper</h3>
                    <div class="wallpaper-options">
                        <div class="wallpaper-option active" data-wallpaper="wallpaper1.jpeg">
                            <img src="/api/placeholder/400/800" alt="Space Wallpaper 1">
                        </div>
                        <div class="wallpaper-option" data-wallpaper="wallpaper2.jpeg">
                            <img src="/api/placeholder/400/800" alt="Space Wallpaper 2">
                        </div>
                    </div>
                    <div class="custom-wallpaper">
                        <input type="file" id="custom-wallpaper-input" accept="image/*">
                        <label for="custom-wallpaper-input">Upload Custom Wallpaper</label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Theme</h3>
                    <div class="theme-options">
                        <div class="theme-option active" style="background-color: rgb(75, 0, 130);"
                            data-theme="dark-purple"></div>
                        <div class="theme-option" style="background-color: rgb(0, 0, 128);" data-theme="dark-blue">
                        </div>
                        <div class="theme-option" style="background-color: rgb(0, 100, 0);" data-theme="dark-green">
                        </div>
                        <div class="theme-option" style="background-color: rgb(139, 0, 0);" data-theme="dark-red"></div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>App Grid</h3>
                    <div class="grid-options">
                        <div class="grid-option active" data-grid="4">4√ó4</div>
                        <div class="grid-option" data-grid="5">5√ó5</div>
                        <div class="grid-option" data-grid="6">6√ó6</div>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Customize App Icons</h3>
                    <p>Select an app to customize its icon:</p>
                    <div class="app-icon-customization" id="app-icon-customization">
                        <!-- App icons will be dynamically added here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="app-screen" id="playstore-screen" data-app="playstore">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Play Store</h2>
                <div></div>
            </div>
            <div class="app-content">
                <div class="store-categories">
                    <div class="store-category active">Games</div>
                    <div class="store-category">Installed</div>
                </div>
                <div class="store-apps">
                    <div class="store-app" data-game="cosmicdash">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Cosmic Dash">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Cosmic Dash</div>
                            <div class="store-app-description">Race through space avoiding obstacles!</div>
                        </div>
                        <div class="store-app-actions" data-installed="false">INSTALL</div>
                    </div>
                    <div class="store-app" data-game="pacman">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Pacman">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Pacman</div>
                            <div class="store-app-description">Classic arcade game - eat dots, avoid ghosts!</div>
                        </div>
                        <div class="store-app-actions" data-installed="false">INSTALL</div>
                    </div>
                    <div class="store-app" data-game="tictactoe">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Tic Tac Toe">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Tic Tac Toe</div>
                            <div class="store-app-description">Classic game of X's and O's</div>
                        </div>
                        <div class="store-app-actions" data-installed="false">INSTALL</div>
                    </div>
                    <div class="store-app" data-game="tetris">
                        <div class="store-app-icon">
                            <img src="/api/placeholder/400/400" alt="Tetris">
                        </div>
                        <div class="store-app-info">
                            <div class="store-app-name">Tetris</div>
                            <div class="store-app-description">Arrange falling blocks to clear lines</div>
                        </div>
                        <div class="store-app-actions" data-installed="false">INSTALL</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screens -->
        <div class="app-screen" id="cosmicdash-screen" data-app="cosmicdash">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Cosmic Dash</h2>
                <div></div>
            </div>
            <div class="app-content">
                <iframe class="game-frame" src="/games/cosmicdash.html"></iframe>
            </div>
        </div>

        <div class="app-screen" id="pacman-screen" data-app="pacman">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Pacman</h2>
                <div></div>
            </div>
            <div class="app-content">
                <iframe class="game-frame" src="/games/pacman.html"></iframe>
            </div>
        </div>

        <div class="app-screen" id="tictactoe-screen" data-app="tictactoe">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Tic Tac Toe</h2>
                <div></div>
            </div>
            <div class="app-content">
                <iframe class="game-frame" src="/games/tictactoe.html"></iframe>
            </div>
        </div>

        <div class="app-screen" id="tetris-screen" data-app="tetris">
            <div class="app-header">
                <button class="back-button">‚Üê</button>
                <h2>Tetris</h2>
                <div></div>
            </div>
            <div class="app-content">
                <iframe class="game-frame" src="/games/tetris.html"></iframe>
            </div>
        </div>

        <div class="copyright">
            <img src="/api/placeholder/400/400" alt="Icon" id="copyright-icon">
            <span>copyrighted by gamedroid 2025</span>
        </div>
    </div>

    <script>
        // App data
        const apps = [
            { id: 'games', name: 'Games', icon: '/api/placeholder/400/400' },
            { id: 'calendar', name: 'Calendar', icon: '/api/placeholder/400/400' },
            { id: 'clock', name: 'Clock', icon: '/api/placeholder/400/400' },
            { id: 'support', name: 'Support Us', icon: '/api/placeholder/400/400' },
            { id: 'settings', name: 'Settings', icon: '/api/placeholder/400/400' },
            { id: 'playstore', name: 'Play Store', icon: '/api/placeholder/400/400' }
        ];

        // Game data
        const games = [
            { id: 'cosmicdash', name: 'Cosmic Dash', icon: '/api/placeholder/400/400', installed: false },
            { id: 'pacman', name: 'Pacman', icon: '/api/placeholder/400/400', installed: false },
            { id: 'tictactoe', name: 'Tic Tac Toe', icon: '/api/placeholder/400/400', installed: false },
            { id: 'tetris', name: 'Tetris', icon: '/api/placeholder/400/400', installed: false }
        ];

        // Settings
        let settings = {
            wallpaper: 'wallpaper1.jpeg',
            theme: 'dark-purple',
            grid: 4,
            customWallpaper: null,
            installedApps: [],
            customIcons: {}
        };

        // DOM Elements
        const container = document.getElementById('container');
        const appGrid = document.getElementById('app-grid');
        const appDrawer = document.getElementById('app-drawer');
        const appDrawerGrid = document.getElementById('app-drawer-grid');
        const appDrawerHandle = document.getElementById('app-drawer-handle');
        const statusTime = document.getElementById('status-time');
        const clockTime = document.getElementById('clock-time');
        const clockDate = document.getElementById('clock-date');
        const currentMonth = document.getElementById('current-month');
        const calendarDays = document.getElementById('calendar-days');
        const prevMonth = document.getElementById('prev-month');
        const nextMonth = document.getElementById('next-month');
        const appIconCustomization = document.getElementById('app-icon-customization');

        // Load saved settings
        function loadSettings() {
            const savedSettings = localStorage.getItem('gameDroidSettings');
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
                applySettings();
            } else {
                // Default settings
                applySettings();
            }
        }

        // Save settings
        function saveSettings() {
            localStorage.setItem('gameDroidSettings', JSON.stringify(settings));
        }

        // Apply settings
        function applySettings() {
            // Apply wallpaper
            if (settings.customWallpaper) {
                container.style.backgroundImage = `url(${settings.customWallpaper})`;
            } else {
                container.style.backgroundImage = `url(/api/placeholder/1080/1920)`;
            }

            // Apply theme
            document.documentElement.style.setProperty('--primary-color', getThemeColor(settings.theme));
            document.documentElement.style.setProperty('--accent-color', getAccentColor(settings.theme));

            // Apply grid
            appGrid.style.gridTemplateColumns = `repeat(${settings.grid}, 1fr)`;
            appDrawerGrid.style.gridTemplateColumns = `repeat(${settings.grid}, 1fr)`;

            // Apply custom icons
            for (const appId in settings.customIcons) {
                const iconElements = document.querySelectorAll(`.app[data-app="${appId}"] .app-icon img`);
                iconElements.forEach(icon => {
                    icon.src = settings.customIcons[appId];
                });
            }

            // Update wallpaper options
            document.querySelectorAll('.wallpaper-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset.wallpaper === settings.wallpaper && !settings.customWallpaper) {
                    option.classList.add('active');
                }
            });

            // Update theme options
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset.theme === settings.theme) {
                    option.classList.add('active');
                }
            });

            // Update grid options
            document.querySelectorAll('.grid-option').forEach(option => {
                option.classList.remove('active');
                if (parseInt(option.dataset.grid) === settings.grid) {
                    option.classList.add('active');
                }
            });

            // Update installed apps
            updateInstalledApps();
        }

        // Get theme color
        function getThemeColor(theme) {
            switch (theme) {
                case 'dark-purple': return 'rgba(75, 0, 130, 0.8)';
                case 'dark-blue': return 'rgba(0, 0, 128, 0.8)';
                case 'dark-green': return 'rgba(0, 100, 0, 0.8)';
                case 'dark-red': return 'rgba(139, 0, 0, 0.8)';
                default: return 'rgba(75, 0, 130, 0.8)';
            }
        }

        // Get accent color
        function getAccentColor(theme) {
            switch (theme) {
                case 'dark-purple': return 'rgb(138, 43, 226)';
                case 'dark-blue': return 'rgb(30, 144, 255)';
                case 'dark-green': return 'rgb(46, 139, 87)';
                case 'dark-red': return 'rgb(220, 20, 60)';
                default: return 'rgb(138, 43, 226)';
            }
        }

        // Populate app grid
        function populateAppGrid() {
            appGrid.innerHTML = '';

            // Add apps to home screen
            apps.forEach(app => {
                if (app.id !== 'games' && app.id !== 'playstore' && app.id !== 'settings') {
                    const appElement = createAppElement(app);
                    appGrid.appendChild(appElement);
                }
            });
        }

        // Populate app drawer
        function populateAppDrawer() {
            appDrawerGrid.innerHTML = '';

            // Add all apps to drawer
            apps.forEach(app => {
                const appElement = createAppElement(app);
                appDrawerGrid.appendChild(appElement);
            });

            // Add installed games to drawer
            games.forEach(game => {
                if (settings.installedApps.includes(game.id)) {
                    const gameElement = createAppElement({
                        id: game.id,
                        name: game.name,
                        icon: game.icon
                    });
                    appDrawerGrid.appendChild(gameElement);
                }
            });
        }

        // Create app element
        function createAppElement(app) {
            const appElement = document.createElement('div');
            appElement.className = 'app';
            appElement.dataset.app = app.id;

            const iconElement = document.createElement('div');
            iconElement.className = 'app-icon';

            const imgElement = document.createElement('img');
            imgElement.src = settings.customIcons[app.id] || app.icon;
            imgElement.alt = app.name;

            const nameElement = document.createElement('div');
            nameElement.className = 'app-name';
            nameElement.textContent = app.name;

            iconElement.appendChild(imgElement);
            appElement.appendChild(iconElement);
            appElement.appendChild(nameElement);

            appElement.addEventListener('click', () => openApp(app.id));

            return appElement;
        }

        // Open app
        function openApp(appId) {
            const appScreen = document.getElementById(`${appId}-screen`);
            if (appScreen) {
                appScreen.classList.add('open');
                closeAppDrawer();
            }
        }

        // Close app
        function closeApp(appId) {
            const appScreen = document.getElementById(`${appId}-screen`);
            if (appScreen) {
                appScreen.classList.remove('open');
            }
        }

        // Toggle app drawer
        function toggleAppDrawer() {
            appDrawer.classList.toggle('open');
        }

        // Close app drawer
        function closeAppDrawer() {
            appDrawer.classList.remove('open');
        }

        // Update clock
        function updateClock() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}`;
            const fullTimeString = `${hours}:${minutes}:${seconds}`;

            statusTime.textContent = timeString;
            if (clockTime) {
                clockTime.textContent = fullTimeString;
            }

            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('en-US', options);

            if (clockDate) {
                clockDate.textContent = dateString;
            }
        }

        // Update calendar
        function updateCalendar() {
            const now = new Date();
            let year = now.getFullYear();
            let month = now.getMonth();

            function renderCalendar(year, month) {
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startDay = firstDay.getDay(); // 0 = Sunday

                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                currentMonth.textContent = `${monthNames[month]} ${year}`;

                calendarDays.innerHTML = '';

                // Add day names
                const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayNames.forEach(dayName => {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'day-name';
                    dayElement.textContent = dayName;
                    calendarDays.appendChild(dayElement);
                });

                // Add empty days before start of month
                for (let i = 0; i < startDay; i++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'day other-month';
                    calendarDays.appendChild(dayElement);
                }

                // Add days of month
                const today = new Date();
                for (let i = 1; i <= daysInMonth; i++) {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'day';
                    dayElement.textContent = i;

                    if (year === today.getFullYear() && month === today.getMonth() && i === today.getDate()) {
                        dayElement.classList.add('today');
                    }

                    calendarDays.appendChild(dayElement);
                }
            }

            renderCalendar(year, month);

            prevMonth.addEventListener('click', () => {
                month--;
                if (month < 0) {
                    month = 11;
                    year--;
                }
                renderCalendar(year, month);
            });

            nextMonth.addEventListener('click', () => {
                month++;
                if (month > 11) {
                    month = 0;
                    year++;
                }
                renderCalendar(year, month);
            });
        }

        // Update installed apps
        function updateInstalledApps() {
            games.forEach(game => {
                game.installed = settings.installedApps.includes(game.id);

                // Update Play Store buttons
                const storeAction = document.querySelector(`.store-app[data-game="${game.id}"] .store-app-actions`);
                if (storeAction) {
                    if (game.installed) {
                        storeAction.textContent = 'UNINSTALL';
                        storeAction.dataset.installed = 'true';
                    } else {
                        storeAction.textContent = 'INSTALL';
                        storeAction.dataset.installed = 'false';
                    }
                }
            });

            // Refresh app drawer
            populateAppDrawer();
        }

        // Setup app icon customization
        function setupAppIconCustomization() {
            appIconCustomization.innerHTML = '';

            apps.forEach(app => {
                const appDiv = document.createElement('div');
                appDiv.className = 'app-icon-custom';

                const appName = document.createElement('div');
                appName.textContent = app.name;

                const input = document.createElement('input');
                input.type = 'file';
                input.id = `custom-icon-${app.id}`;
                input.accept = 'image/*';

                const label = document.createElement('label');
                label.htmlFor = `custom-icon-${app.id}`;
                label.textContent = 'Change Icon';

                appDiv.appendChild(appName);
                appDiv.appendChild(input);
                appDiv.appendChild(label);
                appIconCustomization.appendChild(appDiv);

                input.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            settings.customIcons[app.id] = e.target.result;
                            saveSettings();
                            applySettings();
                        };
                        reader.readAsDataURL(file);
                    }
                });
            });
        }

        // Prevent back button from navigating away
        function preventBackButton() {
            window.history.pushState(null, '', window.location.href);
            window.onpopstate = function () {
                window.history.pushState(null, '', window.location.href);
            };
        }

        // Initialize
        function init() {
            loadSettings();
            populateAppGrid();
            populateAppDrawer();
            setupAppIconCustomization();
            updateClock();
            updateCalendar();
            preventBackButton();

            // Update clock every second
            setInterval(updateClock, 1000);

            // App drawer toggle
            appDrawerHandle.addEventListener('click', toggleAppDrawer);

            // Back buttons
            document.querySelectorAll('.back-button').forEach(button => {
                button.addEventListener('click', () => {
                    const appScreen = button.closest('.app-screen');
                    if (appScreen) {
                        appScreen.classList.remove('open');
                    }
                });
            });

            // Wallpaper selection
            document.querySelectorAll('.wallpaper-option').forEach(option => {
                option.addEventListener('click', () => {
                    settings.wallpaper = option.dataset.wallpaper;
                    settings.customWallpaper = null;
                    saveSettings();
                    applySettings();
                });
            });

            // Custom wallpaper upload
            document.getElementById('custom-wallpaper-input').addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        settings.customWallpaper = e.target.result;
                        saveSettings();
                        applySettings();
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Theme selection
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', () => {
                    settings.theme = option.dataset.theme;
                    saveSettings();
                    applySettings();
                });
            });

            // Grid selection
            document.querySelectorAll('.grid-option').forEach(option => {
                option.addEventListener('click', () => {
                    settings.grid = parseInt(option.dataset.grid);
                    saveSettings();
                    applySettings();
                });
            });

            // Play Store actions
            document.querySelectorAll('.store-app-actions').forEach(action => {
                action.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const gameId = action.closest('.store-app').dataset.game;
                    if (gameId) {
                        if (action.dataset.installed === 'true') {
                            // Uninstall
                            settings.installedApps = settings.installedApps.filter(id => id !== gameId);
                        } else {
                            // Install
                            if (!settings.installedApps.includes(gameId)) {
                                settings.installedApps.push(gameId);
                            }
                        }
                        saveSettings();
                        updateInstalledApps();
                    }
                });
            });

            // Play games
            document.querySelectorAll('.store-app[data-game]').forEach(app => {
                app.addEventListener('click', () => {
                    const gameId = app.dataset.game;
                    if (gameId) {
                        openApp(gameId);
                    }
                });
            });
        }

        // Call init when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>